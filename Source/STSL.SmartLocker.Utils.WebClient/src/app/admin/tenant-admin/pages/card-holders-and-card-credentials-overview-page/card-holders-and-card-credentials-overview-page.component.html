<app-layout [pageTitle]="'Manage ' + (cardHolderAliasPlural$ | async)" [fullHeight]="true">
  <div class="flex flex-col h-full">
    <mat-tab-group dynamicHeight preserveContent [(selectedIndex)]="selectedTabIndex">
      <mat-tab label="Card Holders">
        <admin-card-holders-view
          [permissions]="cardHolderPermissions"
          [cardHolderActions]="cardHolderActions"
          (viewCardCredentialsClicked)="viewCardCredentialsForCardHolder($event)"
        />
      </mat-tab>
      <mat-tab label="Card Credentials">
        <admin-card-credentials-view
          [currentlySelectedCardHolder$]="currentlySelectedCardHolder$"
          [permissions]="cardCredentialPermissions"
          (currentlySelectedCardHolderChanged)="viewCardCredentialsForCardHolder($event)"
        />
      </mat-tab>
    </mat-tab-group>
  </div>
</app-layout>

<ng-template #cardHolderActions let-cardHolder>
  <button mat-menu-item (click)="viewLockerLeasesForCardHolder(cardHolder)">
    <mat-icon color="primary">history</mat-icon>
    <span>View Locker Leases</span>
  </button>
</ng-template>
